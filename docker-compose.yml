version: '3'
services:
  admin-server:
    image: training/admin-server
    restart: always
    environment:
      SERVER_PORT: 8090
  zookeeper-server:
    image: wurstmeister/zookeeper
    restart: always
  kafka-server:
    image: wurstmeister/kafka
    environment:
      KAFKA_ADVERTISED_HOST_NAME: kafka-server
      KAFKA_ZOOKEEPER_CONNECT: zookeeper-server:2181
  configuration-server:
    image: training/configuration-server
    restart: always
    environment:
      PORT: 8888
      GIT_URI: https://github.com/landrzejewski/spring-cloud-training
      KAFKA_BROKERS: kafka-server
      ENCRYPT_KEY: summwitockey
  discovery-server:
    image: training/discovery-server
    restart: always
    environment:
      PROFILE: production
      CONFIGURATION_SERVER: optional:configserver:http://configuration-server:8888
    ports:
      - "8761:8761"
  gateway-server:
    image: training/gateway-server
    restart: always
    environment:
      PROFILE: production
      CONFIGURATION_SERVER: optional:configserver:http://configuration-server:8888
    ports:
      - "8080:8080"
